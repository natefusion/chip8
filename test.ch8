def px v1
def py v2

: up
  #x70
  #x70
  #x20
  #x70
  #xA8
  #x20
  #x50
  #x50
       
: down #x50 #x50 #x20 #xA8 #x70 #x20 #x70 #x70

proc if-w-pressed
  set i up
  add py #xFF
end

[proc if-s-pressed
  set i down
  add py 1]
  
[macro if-a-pressed (X)
  set i up
  add px X]

; this is a comment
[proc main
  rand px #b0011111
  rand py #b0001111
  set i up  
  draw px py 8

  loop
    draw px py 8

    set v0 KEY-W , eq v0 key
    call if-w-pressed

    [set v0 KEY-S]
    [if (eq v0 key)
      call if-s-pressed]

    set v0 KEY-A
    if (eq v0 key)
    then
      if-a-pressed #xFF
    end      
    
    [if (eq v0 key)
      [then
        if-a-pressed #xFF]]

    set v0 KEY-D
    eq v0 key , call if-d-pressed

    draw px py 8

    loop
      set ve dt
      neq ve 0
    end

    set ve 3
    set dt ve
  end
end

[proc if-d-pressed
  set i up
  add px 1]
  